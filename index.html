<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href = "./indexcss.css">
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three/examples/jsm/",
                "chart.js": "https://cdn.jsdelivr.net/npm/chart.js/+esm"
            }
        }
    </script>
    
    

</head>
<body oncontextmenu = "return false" ondragstart = "return false" ondragend = "return false">
    <div id = "root-window">
        <div id = "render-target"></div>

        <div id="togtog">☰</div>
        <div id = "href-buttons">
            <button id = "hrefButton1" onclick = "location.href = '../webVisual4/index.html'">Partially Set Back </button>
        </div>
        <div id = "control-buttons">
            <button id = "fullscreen-button">Enter Fullscreen</button>
            <button id = "reset-button">Reset Camera</button>
            <button id = "select-cat">Select Cat</button>
            <button id = "model-info">Model Info</button>
            <button id = "model-graph">Model Graph</button>
        </div>
        <div id = "select-container">
            <h2 id = "select-head">Select Category</h2>
            <div id = "select-buttons">
                <button id = "wall-select">Wall</button>
                <button id = "curtainWall-select">Curtain Wall</button>
                <button id = "floor-select">Floor</button>
                <button id = "ceiling-select">Ceiling</button>
                <button id = "column-select">Column</button>
                <button id = "structuralColumn-select">ST Column</button>
                <button id = "stair-select">Stair</button>
                <button id = "railing-select">Railing</button>
                <button id = "window-select">Window</button>
                <button id = "door-select">Door</button>
            </div>
            <button id = "okay-select">Okay!</button>
        </div>

        <div id="mesh-info-popup">
            <div class="popup-body">
                <div id="popup-content"></div>
            </div>
        </div>

        <!-- 물량 정보 -->
        <div class = "info-container" id = "info-window">
            <h2>Quantity Information</h2>
            <div class = "info-target" id = "info-target"></div>
        </div>

        <!-- 물량 그래프 -->
        <div class = "graph-container expanded" id = "graph-window">
            <h2>Quantity Graph</h2>
            <div class = "graph-target" id = "graph-target">
                <div class = "graph-values">
                    <h2 class = "graph-name">Walls</h2>
                    <canvas class = "graph-cat" id = "graph-wall"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Curtain Wall</h2>
                    <canvas class = "graph-cat" id = "graph-curtainWall"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Floor</h2>
                    <canvas class = "graph-cat" id = "graph-floor"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Ceiling</h2>
                    <canvas class = "graph-cat" id = "graph-ceiling"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Column</h2>
                    <canvas class = "graph-cat" id = "graph-column"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Structural Column</h2>
                    <canvas class = "graph-cat" id = "graph-structuralColumn"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Stair</h2>
                    <canvas class = "graph-cat" id = "graph-stair"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Railing</h2>
                    <canvas class = "graph-cat" id = "graph-railing"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Windows</h2>
                    <canvas class = "graph-cat" id = "graph-forwindow"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
                <div class = "graph-values">
                    <h2 class = "graph-name">Doors</h2>
                    <canvas class = "graph-cat" id = "graph-door"></canvas>
                    <div class = "gapgap">
                        <div class = "gapa">𖤂</div>
                    </div>
                </div>
            </div>
        </div>

        <div class = "slider-container" id = "slider-container" ondragstart = "return false">
            <div class = "slider-header" id = "slider-header">
                <span>Slider Panel</span>
                <button id = "toggle-button">↙</button>
            </div>
            <div class = "slider-body">
                <div class = "slider-wrapper">
                    <button class= "f decrease" id = "decrease-1"><</button>
                    <input type="range" min = "0" max = "100" value = "0" id = "slider-1" class = "slider">
                    <button class = "f increase" id = "increase-1">></button>
                    <button class="f valueA" id = "value-1">25%</button>
                </div>
                <div class="slider-controls">
                    <button id="rewind">⏪</button>
                    <button id="pause">⏸</button>
                    <button id="play">▶️</button>
                    <button id="fast-forward">⏩</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="modal" id="dateTimeModal">
        <div class="modal-content">
            <h3 id = "modal-head">날짜 & 시간 선택</h3>
            <div id = "input-container">
                <input type="date" id="dateInput">
                <input type="time" id="timeInput">
            </div>
            
            <div id = "close-container">
                <button id = "okay-button" class="f close-btn">확인</button>
                <button id = "cancel-button" class="f close-btn">취소</button>
            </div>
        </div>
    </div>
    <script type = "module">
        // main 불러오기
        import { main } from './main.js';
        document.addEventListener("dragover", (event) => event.preventDefault());
        document.addEventListener("drop", (event) => event.preventDefault());
        document.addEventListener("DOMContentLoaded", () => {
            main();
        });
        
    </script>
    <script>
        // web panel setting
        const toggleButton = document.getElementById('toggle-button');
        const sliderContainer = document.getElementById('slider-container');
        
        toggleButton.addEventListener('click', () => {
            // 토글 버튼 클릭 시 슬라이더 컨테이너에 'minimized' 클래스 추가/제거
            sliderContainer.classList.toggle('minimized');

            // 토글 버튼의 아이콘 변경 (예: ⤢ ↘)
            if (sliderContainer.classList.contains('minimized')) {
                toggleButton.textContent = '⤢';
            } else {
                toggleButton.textContent = '↙';
            }
        });

        document.getElementById("togtog").addEventListener("click", function () {
            let hrefPanel = document.getElementById("href-buttons");
            let controlPanel = document.getElementById("control-buttons");

            // 확장 상태 토글
            hrefPanel.classList.toggle("expanded");
            controlPanel.classList.toggle("expanded");

            // 버튼이 눌릴 때 효과
            this.classList.toggle("active");

            // 버튼 모양 변경 (☰ → ✖)
            this.textContent = hrefPanel.classList.contains("expanded") ? "✖" : "☰";
        });
        
        const selectCat = document.getElementById("select-cat");
        const selectOkay = document.getElementById("okay-select");
        const slider = document.getElementById("slider-container");
        // const selectWall = document.getElementById("wall-select");
        // const selectCurtainWall = document.getElementById("curtainWall-select");
        // const selectFloor = document.getElementById("floor-select");
        // const selectCeiling = document.getElementById("ceiling-select");
        // const selectColumn = document.getElementById("column-select");
        // const selectStructuralColumn = document.getElementById("structuralColumn-select");
        // const selectStair = document.getElementById("stair-select");
        // const selectRailing = document.getElementById("railing-select");
        // const selectWindow = document.getElementById("wall-select");
        // const selectDoor = document.getElementById("door-select");
        // const selectDone = document.getElementById("okay-select");

        // const fullScreen = document.getElementById("fullscreen-button");
        // const resetCamera = document.getElementById("reset-button");
        // const modelInfo = document.getElementById("model-info");
        // const modelGraph = document.getElementById("model-graph");

        // const hrefButton1 = document.getElementById("hrefButton1");
        // const hrefButton2 = document.getElementById("hrefButton2");
        
        // const brefButtons = document.getElementById("href-buttons");
        // const contButtons = document.getElementById("control-buttons");

        // const infoWindow = document.getElementById("info-window");
        // const graphWindow = document.getElementById("graph-window");

        // const buttonsToShow = [
        //     selectWall,
        //     selectCurtainWall,
        //     selectFloor,
        //     selectCeiling,
        //     selectColumn, 
        //     selectStructuralColumn,
        //     selectStair,
        //     selectRailing,
        //     selectWindow,
        //     selectDoor,
        //     selectDone,
        // ]

        // const buttonsToHide = [
        //     fullScreen, 
        //     resetCamera,
        //     modelInfo,
        //     modelGraph, 
        //     selectCat,
        //     hrefButton1,
        //     hrefButton2,
        // ]
        let toggleCheck = null;
        selectCat.addEventListener("click", function () {
            let hrefPanel = document.getElementById("href-buttons");
            let controlPanel = document.getElementById("control-buttons");
            let selectPanel = document.getElementById("select-container");
            let togtog = document.getElementById("togtog");
            
            togtog.style.display = "none";
            slider.style.opacity = "0.2";
            
            if (slider.classList.contains("minimized")) {
                toggleCheck = "minimized";
            } else {
                slider.classList.add("minimized");
                toggleCheck = "";
            }
            
            toggleButton.style.display = "none";
            // 확장 상태 토글
            hrefPanel.classList.toggle("expanded");
            controlPanel.classList.toggle("expanded");
            selectPanel.classList.toggle("expanded");

            // 버튼이 눌릴 때 효과
            this.classList.toggle("active");
        });

        selectOkay.addEventListener("click", function () {
            let hrefPanel = document.getElementById("href-buttons");
            let controlPanel = document.getElementById("control-buttons");
            let selectPanel = document.getElementById("select-container");
            let togtog = document.getElementById("togtog");
            
            togtog.style.display = "block";
            slider.style.opacity = "1";

            if (toggleCheck === "minimized") {

            } else {
                slider.classList.remove("minimized");
            }
            
            
            toggleButton.style.display = "block";

            hrefPanel.classList.toggle("expanded");
            controlPanel.classList.toggle("expanded");
            selectPanel.classList.toggle("expanded");

            document.getElementById("togtog").classList.toggle("active");
        })

        

    </script>
</body>
</html>